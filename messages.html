<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="icon" type="image/png" sizes="32x32" href="/public/galaxy.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/public/galaxy.png" />
    <link
      href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700;900&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="/src/styles/pages/messages/Messages.css" />

    <title>Enigma System - Mensajería</title>
  </head>
  <body>
    <div class="grid-background"></div>
    <div class="scanlines"></div>
    <div class="particles" id="particles"></div>

    <main class="messenger-container">
      <!-- Barra de navegación lateral -->
      <aside class="nav-sidebar">
        <div class="profile-pic">L</div>
        <div class="nav-item active">
          <i class="fas fa-comments"></i>
        </div>
  
        <div class="nav-item" id="settings-btn">
          <i class="fas fa-cog"></i>
        </div>
      </aside>

      <!-- Panel de chats -->
      <div class="chats-panel">

        <!-- Header -->
        <div class="chats-header">
          <div class="chats-title">MENSAJES</div>
          
          <div class="search-container">
            <i class="fas fa-search search-icon"></i>
            <input type="text" class="search-input" placeholder="Buscar un chat o iniciar uno nuevo">
          </div>
        </div>
        
        <!-- Lista de Chats  -->
        <div class="chats-list">

          <!-- Este es un ejemplo: Añadir con js posteriormente -->
          <div class="chat-item active">
            <div class="chat-avatar">GE</div>

            <div class="chat-info">
              <div class="chat-name">Grupo Enigmático</div>
              <div class="chat-preview">LILITH: He completado el módulo de encriptación</div>
            </div>

            <div class="chat-time">12:45</div>
          </div>
          
          <!-- Este es otro ejemplo: Añadir con js posteriormente -->
          <div class="chat-item">
            <div class="chat-avatar">L</div>

            <div class="chat-info">
              <div class="chat-name">LILITH</div>
              <div class="chat-preview">hola hermosa q haces aka abajo tengo mucho q darteee</div>
            </div>
            <div class="chat-time">11:30</div>
          </div>
        </div>
        
        <!-- Botón flotante -->
        <div class="floating-button" id="floatingButton">
          <i class="fas fa-plus"></i>
        </div>
        
        <!-- Modal de opciones (Crear grupo o iniciar conversación) -->
        <div class="mini-modal-overlay" id="miniModalOverlay">
          <div class="mini-modal">
            <div class="mini-modal-option" data-action="create-group">
              <i class="fas fa-users"></i>
              <span>Crear grupo</span>
            </div>

            <div class="mini-modal-option" data-action="start-chat">
              <i class="fas fa-comment"></i>
              <span>Iniciar conversación</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Panel de conversación -->
      <div class="conversation-panel">
        <!-- Header  -->
        <div class="conversation-header">
            <div class="conversation-avatar">En</div>
            <div class="conversation-info">
              <div class="conversation-name">Grupo Enigmático</div>
              <div class="conversation-status">En línea • </div>
            </div>

            <div class="conversation-actions">
              <i class="fas fa-search action-icon"></i>
              <i class="fas fa-ellipsis-v action-icon"></i>
            </div>
        </div>
        
        <!-- Contenedor de mensajes -->
        <div class="messages-container" id="messagesContainer">
          <!-- Separador de tiempo -->
          <div class="date-separator">SÁBADO</div>
          
          <!--  Mensajes -->
          <div class="message other">
            <div class="message-user" style="margin-bottom: 10px;">LILITH</div>

            <div class="message-text">¿Has revisado el nuevo protocolo de seguridad?</div>
            <div class="message-time">10:24</div>
          </div>
          
          <div class="message own">
            <div class="message-text">Sí, lo he analizado. Hay algunos puntos que necesitan ajustes en la encriptación.</div>
            <div class="message-time">10:25</div>
          </div>
          
          <div class="message other">
            <div class="message-user" style="margin-bottom: 10px;">LILITH</div>
            
            <div class="message-text">¿Podrías especificar qué secciones?</div>
            <div class="message-time">10:26</div>
          </div>
          
          <div class="message own">
            <div class="message-text">Principalmente el módulo de autenticación de dos factores. Sugiero implementar una capa adicional con el algoritmo que desarrollamos la semana pasada.</div>
            <div class="message-time">10:28</div>
          </div>
          
          <div class="message other">
            <div class="message-text">De acuerdo, enviaré los ajustes al equipo de desarrollo. ¿Crees que podamos tenerlo listo para el viernes?</div>
            <div class="message-time">10:30</div>
          </div>
          
          <div class="message own">
            <div class="message-text">Sí, si trabajamos en ello hoy y mañana.</div>
            <div class="message-time">10:32</div>
          </div>
        </div>
        
        <!-- Contenedor para enviar mensajes -->
        <form id="message-form" class="input-container">
            <textarea id="message-input" class="message-input" placeholder="Escribe un mensaje..."></textarea>
            
            <button type="submit" class="send-button">
              <i class="fas fa-paper-plane"></i>
            </button>
        </form>
      </div>
    </main>

    <!-- Footer -->
    <footer class="footer" style="height: 50px;">
      <div class="system-info">
        <div class="info-item">
          <span class="info-label">USUARIO:</span> NO AUTENTICADO
        </div>

        <div class="info-item">
          <span class="info-label">SERVIDOR:</span> ENIGMA
        </div>

        <div class="info-item">
          <span class="info-label">VERSIÓN:</span> 1.0.0
        </div>
      </div>

      <div class="system-info">
        <div class="info-item">
          <span class="info-label">HORA DEL SISTEMA:</span>
          <span id="system-time">--:--:--</span>
        </div>
      </div>
    </footer>

    <!-- MODALES -->
    <!-- 1. Modal de configuración 2FA -->
    <div class="modal-overlay config-modal" id="modalOverlay">
        <div class="modal-container config-modal">
            <div class="corner corner-tl"></div>
            <div class="corner corner-tr"></div>
            <div class="corner corner-bl"></div>
            <div class="corner corner-br"></div>
            
            <div class="close-btn" id="closeModal">
                <i class="fas fa-times"></i>
            </div>
            
            <div class="modal-header">
                <h2 class="modal-title">Two-Factor Authentication (2FA)</h2>
                <p class="modal-subtitle">Configure sus métodos de autenticación de dos factores</p>
            </div>
            
            <div class="modal-content">
              
              <!-- Opción 1: Google Authenticator -->
              <div class="option-group">
                <div class="option-item active">
                  <div class="option-icon">
                    <i class="fas fa-mobile-alt"></i>
                  </div>
                  
                  <div class="option-content">
                    <div class="option-title">Google Authenticator</div>
                    <div class="option-description">
                      Use Google Authenticator para proteger tu cuenta.
                    </div>
                  </div>
                  
                  <div class="option-status active"></div>
                </div>
              </div>
              
              <!-- Opción 2: Email -->
              <div class="option-group">
                <div class="option-item">
                  <div class="option-icon">
                    <i class="fas fa-envelope"></i>
                  </div>
                  <div class="option-content">
                    <div class="option-title">Correo Electrónico</div>

                    <div class="option-description">
                      Use su correo electrónico para proteger su cuenta.
                    </div>
                  </div>

                  <div class="option-status"></div>
                </div>
              </div>

                <!-- Opción 3: Phone Number -->
              <div class="option-group">
                <div class="option-item">
                  <div class="option-icon">
                    <i class="fas fa-phone"></i>
                  </div>

                  <div class="option-content">
                    <div class="option-title">Verificar por SMS</div>

                    <div class="option-description">
                      Use su número de teléfono mediante un mensaje SMS para proteger su cuenta.
                    </div>
                  </div>
                  
                  <div class="option-status"></div>
                </div>
              </div>

              <!-- Opción 4: Passkeys (Biometrics) -->
              <div class="option-group">
                <div class="option-item">
                  <div class="option-icon">
                    <i class="fas fa-fingerprint"></i>
                  </div>

                  <div class="option-content">
                    <div class="option-title">Passkeys (Autenticación biométrica)</div>

                    <div class="option-description">
                      Proteja su cuenta y retiros con Passkeys y/o claves de seguridad, como Yubikey.
                    </div>
                  </div>

                  <div class="option-status"></div>
                </div>
              </div>
              
              <!-- Opción 5: Login solo conPassword -->
              <div class="option-group">
                <div class="option-item">
                    <div class="option-icon">
                      <i class="fas fa-key"></i>
                    </div>

                    <div class="option-content">
                      <div class="option-title">Solo contraseña</div>
                      <div class="option-description">
                        La contraseña de inicio de sesión se utiliza para acceder a su cuenta.
                      </div>
                    </div>

                  <div class="option-status"></div>
                </div>
              </div>
            </div>
        </div>
    </div>

    <!-- 2. Modal para Crear grupo -->
    <div class="modal-overlay chat-modal" id="createGroupModal">
      <div class="modal-container chat-modal">
        <div class="corner corner-tl"></div>
        <div class="corner corner-tr"></div>
        <div class="corner corner-bl"></div>
        <div class="corner corner-br"></div>
        
        <div class="close-btn" id="closeCreateGroupModal">
          <i class="fas fa-times"></i>
        </div>
        
        <div class="modal-header">
          <h2 class="modal-title">Crear grupo</h2>
          <p class="modal-subtitle">Agrega participantes y configura el grupo</p>
        </div>
        
        <div class="modal-content">
          <div class="input-group">
            <label for="groupName">Nombre del grupo</label>
            <input type="text" id="groupName" placeholder="Ingresa el nombre del grupo">
          </div>
          
          <div class="input-group">
            <label for="groupDescription">Descripción del grupo</label>
            <textarea type="text" id="groupDescription" placeholder="Escribe la descripción del grupo"></textarea>
          </div>

          <div class="content-separator"></div>
          
          <div class="input-group">
            <label for="searchUsers">Buscar usuarios</label>
            <input type="text" id="searchUsers" placeholder="Buscar por nombre o usuario">
          </div>

          <div class="selected-users" id="selectedUsers">
            <!-- Aquí se mostrarán los usuarios seleccionados -->
          </div>
          
          <div class="users-list" id="usersListGroup">
            <!-- Aquí se mostrara la lista de usuarios para agregar al grupo -->

            <!-- Este es un ejemplo, borrar luego -->
            <div class="user-item">
              <div class="user-avatar">L</div>

              <div class="user-info">
                <div class="user-name">LILITH</div>
                <div class="user-status">En línea</div>
              </div>
            </div>
          </div>

          <div class="content-separator"></div>
          
          <!-- Permisos -->
          <div class="permissions-group">
            <h3 style="color: var(--color-text); margin-bottom: 15px;">Permisos del grupo</h3>

            <div class="permission-item">
              <div class="permission-info">
                <h4>Quién puede enviar mensajes</h4>
                <p>Todos los participantes pueden enviar mensajes</p>
              </div>

              <div class="permission-toggle active" data-permission="1"></div>
            </div>

            <div class="permission-item">
              <div class="permission-info">
                <h4>Quién puede editar la información del grupo</h4>
                <p>Solo los administradores pueden editar la información</p>
              </div>
              
              <div class="permission-toggle" data-permission="2"></div>
            </div>

            <div class="permission-item">
              <div class="permission-info">
                <h4>Quién puede agregar participantes</h4>
                <p>Todos los participantes pueden agregar personas</p>
              </div>
              <div class="permission-toggle active" data-permission="3"></div>
            </div>
          </div>
          
          <div class="modal-actions">
            <button class="btn btn-cancel" id="cancelCreateGroup">Cancelar</button>
            <button class="btn btn-confirm" id="confirmCreateGroup">Crear grupo</button>
          </div>
        </div>
      </div>
    </div>

    <!-- 3. Modal para Iniciar conversación -->
    <div class="modal-overlay chat-modal" id="startChatModal">
      <div class="modal-container chat-modal">
        <div class="corner corner-tl"></div>
        <div class="corner corner-tr"></div>
        <div class="corner corner-bl"></div>
        <div class="corner corner-br"></div>
        
        <div class="close-btn" id="closeStartChatModal">
          <i class="fas fa-times"></i>
        </div>
        
        <div class="modal-header">
          <h2 class="modal-title">Iniciar conversación</h2>
          <p class="modal-subtitle">Busca un usuario para comenzar a chatear</p>
        </div>
          
        <div class="modal-content">
          <div class="input-group">
            <input type="text" class="search-input" placeholder="Buscar usuario...">
          </div>
          
          <!-- Lista de Usuarios (Contactos) -->
          <div class="users-list">
            <div class="user-item">
              <div class="user-avatar">D</div>

              <div class="user-info">
                <div class="user-name">DANIEL</div>
                <div class="user-status">En línea</div>
              </div>
            </div>

            <div class="user-item">
              <div class="user-avatar">G</div>

              <div class="user-info">
                <div class="user-name">GRACIANO</div>
                <div class="user-status">Última vez hoy a las 10:15</div>
              </div>
            </div>

            <div class="user-item">
              <div class="user-avatar">D</div>

              <div class="user-info">
                <div class="user-name">DALAI</div>
                <div class="user-status">En línea</div>
              </div>
            </div>

              <div class="user-item">
                <div class="user-avatar">L</div>

                <div class="user-info">
                  <div class="user-name">LILITH</div>
                  <div class="user-status">Última vez ayer a las 18:30</div>
                </div>
              </div>
          </div>
        </div>
      </div>
    </div>

    <script type="module" src="src/scripts/ui/pages/Messages.js"></script>
  </body>
</html>
